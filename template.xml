<?xml version="1.0"?>

<Template name="M15 Master" author="ChilliAxe and Haven King" width="3288" height="4488"
          proximity_version="0.5.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/Proximity-Engine/Proximity/0.5.0/template.xsd">
    <Options>
        <!-- Outline the text at the bottom of the card (copyright, artist credit, etc.) -->
        <ToggleOption id="bottom_text_outline" default="false"/>
        <!-- Whether or not to render flavor text -->
        <ToggleOption id="copyright" default="true"/>
        <!-- Whether or not to render the copyright text -->
        <ToggleOption id="flavor_text" default="true"/>
        <!-- Whether or not to render the flavor bar -->
        <ToggleOption id="flavor_bar" default="true"/>
        <ToggleOption id="show_set_symbol" default="true"/>
        <!--
        The hex code of the color to use for the border. Shorthands:
        "black"  - The standard black border (#000000)
        "white"  - The standard white border (#FFFFFF)
        "gold"   - The gold border used for promotional cards (#A6874B)
        "silver" - The silver border used for un-cards (#A1AEB6)
         -->
        <StringOption id="border" default="${border_color}"/>
        <!-- Allows you to easily set the set symbol independently of the set code used at the bottom of the card -->
        <StringOption id="set_symbol" default="${set}"/>
        <StringOption id="watermark" default="${watermark}"/>
    </Options>
    <Imports>
        <Import src="symbols"/>
        <Import src="styles"/>
    </Imports>
    <Plugins>
        <Import repository="https://hephaestus.dev/release" group="dev.hephaestus" artifact="proximity-mtg" version=">=1.0.0"/>
    </Plugins>
    <ConditionDefinitions>
        <Definition name="colorless_artifact">
            <IsPresent key="proximity.mtg.types.artifact"/>
            <IsEquals key="proximity.mtg.color_count" value="0"/>
        </Definition>
        <Definition name="one_or_two_colors">
            <Range key="proximity.mtg.color_count" min="1" max="2"/>
        </Definition>
    </ConditionDefinitions>
    <Resources>
        <Resource type="assets" location="https://hephaestus.dev/proximity/resources/set_symbols" version="1.0.0"/>
        <Resource type="assets" location="https://raw.githubusercontent.com/Proximity-Engine/M15-Master-Template" version="1.0.6"/>
    </Resources>
    <Layers>
        <Selector>
            <Image id="cardback">
                <Conditions>
                    <IsPresent key="proximity.options.use_card_back"/>
                    <IsEquals key="proximity.options.use_card_back"/>
                    <IsPresent key="proximity.mtg.is_card_back"/>
                    <IsEquals key="proximity.mtg.is_card_back"/>
                </Conditions>
            </Image>
            <Group>
                <Image id="art" x="0" y="125" width="3288" height="4488" url="${image_uris.art_crop}">
                    <Conditions>
                        <Not>
                            <IsEquals key="proximity.options.art_source" value="NONE"/>
                        </Not>
                    </Conditions>
                </Image>
				<Selector id="border">
                    <Selector id="mdfc">
                        <Image id="standard">
                        </Image>
                    </Selector>
                    <Selector id="transform">
                        <Image id="standard">
                        </Image>
                    </Selector>
                    <Selector id="standard">
                        <Image id="standard">
                        </Image>
                    </Selector>
                    <Conditions>
                        <Not>
                            <IsEquals key="proximity.options.border" value="none"/>
                        </Not>
                    </Conditions>
                </Selector>
                <Selector id="backgrounds">
                    <Selector id="nyx">
                        <Image id="artifact">
                            <Conditions>
                                <IsPresent key="proximity.mtg.types.artifact"/>
                            </Conditions>
                        </Image>
                        <Image id="colorless">
                            <Conditions>
                                <IsEquals key="proximity.mtg.color_count" value="0"/>
                            </Conditions>
                        </Image>
                        <Image id="colored" src="$join{colors}">
                            <Conditions>
                                <IsEquals key="proximity.mtg.color_count" value="1"/>
                            </Conditions>
                        </Image>
                        <Image id="gold"/>
                        <Conditions>
                            <IsPresent key="frame_effects.nyxtouched"/>
                        </Conditions>
                    </Selector>
                    <Selector id="snow">
                        <Image id="artifact">
                            <Conditions>
                                <IsPresent key="proximity.mtg.types.artifact"/>
                                <IsPresent key="proximity.mtg.types.land" value="false"/>
                            </Conditions>
                        </Image>
                        <Image id="land">
                            <Conditions>
                                <IsPresent key="proximity.mtg.types.land"/>
                            </Conditions>
                        </Image>
                        <Image id="colored" src="$join{colors}">
                            <Conditions>
                                <Or>
                                    <IsEquals key="proximity.mtg.color_count" value="1"/>
                                </Or>
                            </Conditions>
                        </Image>
                        <Image id="gold">
                            <Conditions>
                                <Range key="proximity.mtg.color_count" min="2"/>
                            </Conditions>
                        </Image>
                        <Conditions>
                            <IsPresent key="proximity.mtg.types.snow"/>
                        </Conditions>
                    </Selector>
                    <Selector id="standard">
                        <Image id="vehicle">
                            <Conditions>
                                <IsPresent key="proximity.mtg.types.vehicle"/>
                            </Conditions>
                        </Image>
                        <Image id="artifact">
                            <Conditions>
                                <IsPresent key="proximity.mtg.types.artifact"/>
                                <IsPresent key="proximity.mtg.types.land" value="false"/>
                            </Conditions>
                        </Image>
                        <Image id="land">
                            <Conditions>
                                <IsPresent key="proximity.mtg.types.land"/>
                            </Conditions>
                        </Image>
                        <Image id="colored" src="$join{colors}">
                            <Conditions>
                                <Or>
                                    <IsEquals key="proximity.mtg.color_count" value="1"/>
                                    <And>
                                        <IsEquals key="proximity.mtg.color_count" value="2"/>
                                        <IsEquals key="proximity.mtg.hybrid"/>
                                    </And>
                                </Or>
                            </Conditions>
                        </Image>
                        <Image id="gold">
                            <Conditions>
                                <Range key="proximity.mtg.color_count" min="2"/>
                            </Conditions>
                        </Image>
                    </Selector>
                    <Conditions>
                        <Not>
                            <IsEquals key="proximity.options.border" value="none"/>
                        </Not>
                    </Conditions>
                </Selector>
                <Selector id="shadows">
                    <Image id="legendary">
                        <Conditions>
                            <IsPresent key="proximity.mtg.types.legendary"/>
                        </Conditions>
                    </Image>
                    <Image id="mdfc">
                        <Conditions>
                            <IsEquals key="layout" value="modal_dfc"/>
                        </Conditions>
                    </Image>
                    <Selector id="transform">
                        <Image id="front">
                            <Conditions>
                                <IsEquals key="proximity.mtg.front_face"/>
                            </Conditions>
                        </Image>
                        <Image id="back"/>
                        <Conditions>
                            <IsEquals key="layout" value="transform"/>
                        </Conditions>
                    </Selector>
                    <Image id="normal"/>
                </Selector>
				<Fork id="crowns">
                    <Selector>
                        <Image id="colored" src="$join{colors}">
                            <Conditions>
                                <IsEquals key="one_or_two_colors"/>
                            </Conditions>
                        </Image>
                        <Image id="artifact">
                            <Conditions>
                                <IsEquals key="colorless_artifact"/>
                                <IsPresent key="proximity.mtg.types.land" value="false"/>
                            </Conditions>
                        </Image>
                        <Image id="colorless">
                            <Conditions>
                                <Or>
                                    <IsEquals key="proximity.mtg.color_count" value="0"/>
                                    <And>
                                        <IsEquals key="proximity.mtg.color_count" value="2"/>
                                        <IsEquals key="proximity.mtg.hybrid"/>
                                    </And>
                                </Or>
                                <Not>
                                    <IsPresent key="proximity.mtg.types.land"/>
                                </Not>
                            </Conditions>
                        </Image>
                        <Image id="land">
                            <Conditions>
                                <IsPresent key="proximity.mtg.types.land"/>
                            </Conditions>
                        </Image>
                        <Image id="gold"/>
                    </Selector>
                    <Branches>
                        <Branch id="companion">
                            <IsPresent key="frame_effects.companion"/>
                        </Branch>
                        <Branch id="legendary">
                            <IsPresent key="proximity.mtg.types.legendary"/>
                        </Branch>
                    </Branches>
                </Fork>
                <Selector id="plates">
                    <Fork id="mdfc">
                        <Selector>
                            <Image id="monocolored" src="$join{colors}">
                                <Conditions>
                                    <IsEquals key="proximity.mtg.color_count" value="1"/>
                                </Conditions>
                            </Image>
                            <Image id="artifact">
                                <Conditions>
                                    <IsEquals key="colorless_artifact"/>
                                    <IsPresent key="proximity.mtg.types.land" value="false"/>
                                </Conditions>
                            </Image>
                            <Image id="colorless">
                                <Conditions>
                                    <IsEquals key="proximity.mtg.color_count" value="0"/>
                                    <Not>
                                        <IsPresent key="proximity.mtg.types.land"/>
                                    </Not>
                                </Conditions>
                            </Image>
                            <Image id="hybrid">
                                <Conditions>
                                    <Or>
                                        <And>
                                            <IsEquals key="proximity.mtg.color_count" value="2"/>
                                            <IsEquals key="proximity.mtg.hybrid"/>
                                        </And>
                                        <And>
                                            <IsEquals key="proximity.mtg.color_count" value="0"/>
                                            <IsPresent key="proximity.mtg.types.land"/>
                                        </And>
                                    </Or>
                                </Conditions>
                            </Image>
                            <Image id="gold"/>
                        </Selector>
                        <Branches>
                            <Branch id="front">
                                <IsEquals key="proximity.mtg.front_face"/>
                            </Branch>
                            <Branch id="back">
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </Branch>
                        </Branches>
                        <Conditions>
                            <Or>
                                <IsEquals key="layout" value="modal_dfc"/>
                                <IsEquals key="layout" value="transform"/>
                            </Or>
                        </Conditions>
                    </Fork>
                    <Image id="miracle" src="miracle/$join{colors}">
                        <Conditions>
                            <IsEquals key="proximity.mtg.color_count" value="1"/>
                            <IsPresent key="frame_effects"/>
                            <IsPresent key="frame_effects.miracle"/>
                        </Conditions>
                    </Image>
                    <Fork id="standard">
                        <Selector>
                            <Image id="monocolored" src="$join{colors}">
                                <Conditions>
                                    <IsEquals key="proximity.mtg.color_count" value="1"/>
                                </Conditions>
                            </Image>
                            <Image id="artifact">
                                <Conditions>
                                    <IsEquals key="colorless_artifact"/>
                                    <IsPresent key="proximity.mtg.types.land" value="false"/>
                                    <IsPresent key="proximity.mtg.types.snow" value="false"/>
                                </Conditions>
                            </Image>
                            <Image id="colorless">
                                <Conditions>
                                    <IsEquals key="proximity.mtg.color_count" value="0"/>
                                    <Not>
                                        <IsPresent key="proximity.mtg.types.land"/>
                                    </Not>
                                </Conditions>
                            </Image>
                            <Selector>
                                <Image id="colorless">
                                    <Conditions>
                                        <IsPresent key="proximity.mtg.types.snow"/>
                                    </Conditions>
                                </Image>
                                <Image id="hybrid"/>
                                <Conditions>
                                    <Or>
                                        <And>
                                            <IsEquals key="proximity.mtg.color_count" value="2"/>
                                            <IsEquals key="proximity.mtg.hybrid"/>
                                        </And>
                                        <And>
                                            <Or>
                                                <IsEquals key="proximity.mtg.color_count" value="0"/>
                                                <IsEquals key="proximity.mtg.color_count" value="2"/>
                                            </Or>
                                            <IsPresent key="proximity.mtg.types.land"/>
                                        </And>
                                    </Or>
                                </Conditions>
                            </Selector>
                            <Image id="land">
                                <Conditions>
                                    <IsPresent key="proximity.mtg.types.land"/>
                                    <IsEquals key="proximity.mtg.color_count" value="0"/>
                                </Conditions>
                            </Image>
                            <Image id="gold"/>
                        </Selector>
                        <Branches>
                            <Branch id="snow">
                                <IsPresent key="proximity.mtg.types.snow"/>
                            </Branch>
                            <Branch id="standard"/>
                        </Branches>
                    </Fork>
                </Selector>
                <Selector id="pinlines">
                    <Fork id="modal">
                        <Fork>
                            <Selector>
                                <Image id="artifact">
                                    <Conditions>
                                        <IsEquals key="colorless_artifact"/>
                                        <IsPresent key="proximity.mtg.types.land" value="false"/>
                                    </Conditions>
                                </Image>
                                <Image id="colorless">
                                    <Conditions>
                                        <IsEquals key="proximity.mtg.color_count" value="0"/>
                                    </Conditions>
                                </Image>
                                <Image id="colored" src="$join{colors}">
                                    <Conditions>
                                        <IsEquals key="one_or_two_colors"/>
                                    </Conditions>
                                </Image>
                                <Image id="gold"/>
                            </Selector>
                            <Branches>
                                <Branch id="land">
                                    <IsPresent key="proximity.mtg.types.land"/>
                                </Branch>
                                <Branch id="standard"/>
                            </Branches>
                        </Fork>
                        <Branches>
                            <Branch id="front">
                                <IsEquals key="proximity.mtg.front_face"/>
                            </Branch>
                            <Branch id="back">
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </Branch>
                        </Branches>
                        <Conditions>
                            <IsEquals key="layout" value="modal_dfc"/>
                        </Conditions>
                    </Fork>
                    <Fork id="transform">
                        <Selector>
                            <Image id="artifact">
                                <Conditions>
                                    <IsEquals key="colorless_artifact"/>
                                    <IsPresent key="proximity.mtg.types.land" value="false"/>
                                </Conditions>
                            </Image>
                            <Image id="colorless">
                                <Conditions>
                                    <IsEquals key="proximity.mtg.color_count" value="0"/>
                                </Conditions>
                            </Image>
                            <Image id="colored" src="$join{colors}">
                                <Conditions>
                                    <IsEquals key="one_or_two_colors"/>
                                </Conditions>
                            </Image>
                            <Image id="gold"/>
                        </Selector>
                        <Branches>
                            <Branch id="front">
                                <IsEquals key="proximity.mtg.front_face"/>
                            </Branch>
                            <Branch id="back">
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </Branch>
                        </Branches>
                        <Conditions>
                            <IsEquals key="layout" value="transform"/>
                        </Conditions>
                    </Fork>
                    <Image id="miracle" src="miracle/$join{colors}">
                        <Conditions>
                            <IsPresent key="frame_effects.miracle"/>
                            <IsEquals key="proximity.mtg.color_count" value="1"/>
                        </Conditions>
                    </Image>
                    <Selector id="mutate">
                        <Image id="colorless">
                            <Conditions>
                                <IsEquals key="colorless_artifact"/>
                                <IsPresent key="proximity.mtg.types.land" value="false"/>
                            </Conditions>
                        </Image>
                        <Image id="colored" src="$join{colors}">
                            <Conditions>
                                <IsEquals key="one_or_two_colors"/>
                            </Conditions>
                        </Image>
                        <Image id="gold"/>
                        <Conditions>
                            <IsPresent key="keywords.mutate"/>
                        </Conditions>
                    </Selector>
                    <Fork id="standard">
                        <Fork>
                            <Selector>
                                <Image id="artifact">
                                    <Conditions>
                                        <IsEquals key="colorless_artifact"/>
                                        <IsPresent key="proximity.mtg.types.land" value="false"/>
                                    </Conditions>
                                </Image>
                                <Image id="colorless">
                                    <Conditions>
                                        <IsEquals key="proximity.mtg.color_count" value="0"/>
                                    </Conditions>
                                </Image>
                                <Image id="colored" src="$join{colors}">
                                    <Conditions>
                                        <IsEquals key="one_or_two_colors"/>
                                    </Conditions>
                                </Image>
                                <Image id="gold"/>
                            </Selector>
                            <Branches>
                                <Branch id="land">
                                    <IsPresent key="proximity.mtg.types.land"/>
                                </Branch>
                                <Branch id="standard"/>
                            </Branches>
                        </Fork>
                        <Branches>
                            <Branch id="snow">
                                <IsPresent key="proximity.mtg.types.snow"/>
                            </Branch>
                            <Branch id="standard"/>
                        </Branches>
                    </Fork>
                </Selector>
                <Selector id="crowns.companion.gems">
                    <Image id="monocolored" src="$join{colors}">
                        <Conditions>
                            <IsEquals key="proximity.mtg.color_count" value="1"/>
                        </Conditions>
                    </Image>
                    <Image id="artifact">
                        <Conditions>
                            <IsEquals key="colorless_artifact"/>
                            <IsPresent key="proximity.mtg.types.land" value="false"/>
                        </Conditions>
                    </Image>
                    <Image id="colorless">
                        <Conditions>
                            <Or>
                                <IsEquals key="proximity.mtg.color_count" value="0"/>
                                <And>
                                    <IsEquals key="proximity.mtg.color_count" value="2"/>
                                    <IsEquals key="proximity.mtg.hybrid"/>
                                </And>
                            </Or>
                        </Conditions>
                    </Image>
                    <Image id="gold"/>
                    <Conditions>
                        <IsPresent key="frame_effects.companion"/>
                    </Conditions>
                </Selector>
                <SquishBox id="title_bar">
                    <Main id="cost">
                        <HorizontalLayout x="2925" y="512" alignment="end">
                            <Spacer width="50" height="15"/>
                            <Text value="${mana_cost}">
                                <Style font="NDPMTG" size="175">
                                    <Shadow color="#000000" dX="-4" dY="11"/>
                                </Style>
                                <Conditions>
                                    <IsPresent key="mana_cost"/>
                                </Conditions>
                            </Text>
                        </HorizontalLayout>
                    </Main>
                    <Flex>
                        <Selector id="name">
                            <Selector id="dfc">
                                <Text x="665" y="506" value="${name}">
                                    <Style font="Beleren2016-Bold" color="#000000" size="160"/>
                                    <Conditions>
                                        <IsEquals key="proximity.mtg.front_face"/>
                                    </Conditions>
                                </Text>
                                <Text x="665" y="506" value="${name}">
                                    <Style font="Beleren2016-Bold" color="#FFFFFF" size="160"/>
                                    <Conditions>
                                        <IsEquals key="proximity.mtg.front_face" value="false"/>
                                    </Conditions>
                                </Text>
                                <Conditions>
                                    <IsPresent key="layout"/>
                                    <Or>
                                        <IsEquals key="layout" value="modal_dfc"/>
                                        <IsEquals key="layout" value="transform"/>
                                    </Or>
                                </Conditions>
                            </Selector>
                            <Text x="380" y="506" value="${name}">
                                <Style font="Beleren2016-Bold" color="#000000" size="160"/>
                            </Text>
                        </Selector>
                    </Flex>
                </SquishBox>
                <Text id="flipped.power_and_toughness" x="2925" y="3800" alignment="right" value="${proximity.mtg.flipped.power}/${proximity.mtg.flipped.toughness}">
                    <Style font="Beleren2016-Bold" color="#494949" size="100"/>
                    <Conditions>
                        <IsPresent key="layout"/>
                        <IsEquals key="layout" value="transform"/>
                        <IsPresent key="proximity.mtg.flipped.proximity.mtg.types.creature"/>
                        <IsEquals key="proximity.mtg.front_face"/>
                    </Conditions>
                </Text>
                <Group id="pt">
                    <Selector>
                        <Image id="vehicle">
                            <Conditions>
                                <IsPresent key="proximity.mtg.types.vehicle"/>
                            </Conditions>
                        </Image>
                        <Image id="monocolored" src="$join{colors}">
                            <Conditions>
                                <IsEquals key="proximity.mtg.color_count" value="1"/>
                            </Conditions>
                        </Image>
                        <Image id="artifact">
                            <Conditions>
                                <IsEquals key="colorless_artifact"/>
                                <IsPresent key="proximity.mtg.types.land" value="false"/>
                            </Conditions>
                        </Image>
                        <Image id="colorless">
                            <Conditions>
                                <Or>
                                    <IsEquals key="proximity.mtg.color_count" value="0"/>
                                    <And>
                                        <IsEquals key="proximity.mtg.color_count" value="2"/>
                                        <IsEquals key="proximity.mtg.hybrid"/>
                                    </And>
                                </Or>
                            </Conditions>
                        </Image>
                        <Image id="gold"/>
                    </Selector>
                    <Selector>
                        <Text id="vehicle" x="2740" y="4060" alignment="center" value="${power}/${toughness}">
                            <Style font="Beleren2016-Bold" color="#FFFFFF" size="160"/>
                            <Conditions>
                                <IsPresent key="proximity.mtg.types.vehicle"/>
                            </Conditions>
                        </Text>
                        <Text id="creature" x="2740" y="4060" alignment="center" value="${power}/${toughness}">
                            <Style font="Beleren2016-Bold" color="#000000" size="160"/>
                            <Conditions>
                                <IsPresent key="proximity.mtg.types.creature"/>
                            </Conditions>
                        </Text>
                    </Selector>
                    <Conditions>
                        <Or>
                            <IsPresent key="proximity.mtg.types.creature"/>
                            <IsPresent key="proximity.mtg.types.vehicle"/>
                        </Or>
                    </Conditions>
                </Group>
                <Effect id="watermarks" name="brightness" amount="-15%">
                    <Mask>
                        <Selector>
                            <Image src="${watermark}">
                                <Conditions>
                                    <FileExists src="${watermark}.png"/>
                                </Conditions>
                            </Image>
                            <SVG src="${watermark}" x="1644" y="3420" width="1398" height="1015">
                                <Conditions>
                                    <FileExists src="${watermark}.svg"/>
                                </Conditions>
                            </SVG>
                        </Selector>
                    </Mask>
                    <Conditions>
                        <IsPresent key="watermark"/>
                        <Or>
                            <FileExists src="${watermark}.svg"/>
                            <FileExists src="${watermark}.png"/>
                        </Or>
                    </Conditions>
                </Effect>
                <Group id="overlays">
                    <Group id="loyalty">
                        <Image src="../loyalty"/>
                        <Text x="2782" y="4073" alignment="center" value="${loyalty}">
                            <Style font="Beleren2016-Bold" size="170" color="#FFFFFF"/>
                        </Text>
                        <Conditions>
                            <IsPresent key="proximity.mtg.types.planeswalker"/>
                        </Conditions>
                    </Group>
                    <Group id="mdfc">
                        <Fork>
                            <Selector id="top">
                                <Image id="artifact">
                                    <Conditions>
                                        <IsEquals key="colorless_artifact"/>
                                    </Conditions>
                                </Image>
                                <Image id="colorless">
                                    <Conditions>
                                        <IsEquals key="proximity.mtg.color_count" value="0"/>
                                    </Conditions>
                                </Image>
                                <Image id="colored" src="$join{colors}">
                                    <Conditions>
                                        <IsEquals key="proximity.mtg.color_count" value="1"/>
                                    </Conditions>
                                </Image>
                                <Image id="gold"/>
                            </Selector>
                            <Selector id="bottom">
                                <Image id="colorless">
                                    <Conditions>
                                        <IsEquals key="proximity.mtg.flipped.proximity.mtg.color_count" value="0"/>
                                    </Conditions>
                                </Image>
                                <Image id="colored" src="$join{proximity.mtg.flipped.colors}">
                                    <Conditions>
                                        <IsEquals key="proximity.mtg.flipped.proximity.mtg.color_count" value="1"/>
                                    </Conditions>
                                </Image>
                                <Image id="gold"/>
                            </Selector>
                            <Branches>
                                <Branch id="front">
                                    <IsEquals key="proximity.mtg.front_face"/>
                                </Branch>
                                <Branch id="back"/>
                            </Branches>
                        </Fork>
                        <Conditions>
                            <IsEquals key="layout" value="modal_dfc"/>
                        </Conditions>
                    </Group>
                    <Group id="transform">
                        <Image id="sun">
                            <Conditions>
                                <Or>
                                    <IsPresent key="frame_effects.sunmoondfc"/>
                                    <IsEquals key="set" value="mid"/>
                                    <IsEquals key="set" value="vow"/>
                                </Or>
                                <IsEquals key="proximity.mtg.front_face"/>
                            </Conditions>
                        </Image>
                        <Image id="moon">
                            <Conditions>
                                <Or>
                                    <IsPresent key="frame_effects.sunmoondfc"/>
                                    <IsEquals key="set" value="mid"/>
                                    <IsEquals key="set" value="vow"/>
                                </Or>
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </Conditions>
                        </Image>
                        <Image id="pwo">
                            <Conditions>
                                <IsPresent key="frame_effects.originpwdfc"/>
                                <IsEquals key="proximity.mtg.front_face"/>
                            </Conditions>
                        </Image>
                        <Image id="pw">
                            <Conditions>
                                <IsPresent key="frame_effects.originpwdfc"/>
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </Conditions>
                        </Image>
                        <Image id="compass">
                            <Conditions>
                                <IsPresent key="frame_effects.compasslanddfc"/>
                                <IsEquals key="proximity.mtg.front_face"/>
                            </Conditions>
                        </Image>
                        <Image id="land">
                            <Conditions>
                                <IsPresent key="frame_effects.compasslanddfc"/>
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </Conditions>
                        </Image>
                        <Image id="eldrazi moon">
                            <Conditions>
                                <IsPresent key="frame_effects.mooneldrazidfc"/>
                                <IsEquals key="proximity.mtg.front_face"/>
                            </Conditions>
                        </Image>
                        <Image id="eldrazi">
                            <Conditions>
                                <IsPresent key="frame_effects.mooneldrazidfc"/>
                                <IsEquals key="proximity.mtg.front_face" value="false"/>
                            </Conditions>
                        </Image>
                        <Conditions>
                            <IsEquals key="layout" value="transform"/>
                        </Conditions>
                    </Group>
                </Group>
                <SquishBox id="flipped">
                    <Main>
                        <Selector>
                            <Text x="1435" y="4000" alignment="right" value="${proximity.mtg.flipped.mana_cost}">
                                <Style font="NDPMTG" size="125"/>
                                <Conditions>
                                    <IsPresent key="proximity.mtg.flipped.proximity.mtg.types.land" value="false"/>
                                </Conditions>
                            </Text>
                            <Text x="1435" y="4000" alignment="right" value="$oracle_text{proximity.mtg.flipped.proximity.mtg.mana_ability}">
                                <Style font="MPlantin" color="#FFFFFF" size="100">
                                    <Conditions>
                                        <IsEquals key="proximity.mtg.front_face"/>
                                    </Conditions>
                                </Style>
                                <Style font="MPlantin" color="#000000" size="100">
                                    <Conditions>
                                        <IsEquals key="proximity.mtg.front_face" value="false"/>
                                    </Conditions>
                                </Style>
                                <Conditions>
                                    <IsPresent key="proximity.mtg.flipped.proximity.mtg.mana_ability"/>
                                </Conditions>
                            </Text>
                        </Selector>
                    </Main>
                    <Flex id="types">
                        <Text x="345" y="4000" value="${proximity.mtg.flipped.proximity.mtg.main_types}">
                            <Style font="Beleren2016-Bold" color="#FFFFFF" size="100">
                                <Conditions>
                                    <IsEquals key="proximity.mtg.front_face"/>
                                </Conditions>
                            </Style>
                            <Style font="Beleren2016-Bold" color="#000000" size="100">
                                <Conditions>
                                    <IsEquals key="proximity.mtg.front_face" value="false"/>
                                </Conditions>
                            </Style>
                        </Text>
                    </Flex>
                    <Conditions>
                        <IsEquals key="layout" value="modal_dfc"/>
                    </Conditions>
                </SquishBox>
            </Group>
        </Selector>
    </Layers>
</Template>